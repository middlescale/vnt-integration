services:
  integration:
    image: rust:1.88
    working_dir: /workspace/integration
    privileged: true
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    volumes:
      - ${VNT_DIR:-./vnt}:/workspace/vnt
      - ${VNTS_DIR:-./vnts}:/workspace/vnts
      - ./:/workspace/integration
    command: [ "bash", "/workspace/integration/scripts/run-integration.sh" ]
    restart: "no"
